# 工具开关功能说明

## 功能概述

新增的工具开关功能允许用户在AI聊天界面中直接控制是否启用工具调用功能。

## 新增配置项

在 `package.json` 中新增了配置项：

```json
"aiChat.enableTools": {
  "type": "boolean",
  "default": false,
  "description": "启用工具调用功能，允许AI使用文件操作等工具"
}
```

## 界面变化

1. **工具开关控件**：在聊天界面的工具栏中添加了一个开关控件，用于快速切换工具调用功能

2. **工具栏布局**：重新设计了工具栏，包含：
   - 工具开关（启用/禁用）
   - 清空历史按钮
   - 设置按钮

## 功能特性

1. **实时切换**：用户可以通过界面开关实时启用或禁用工具调用功能

2. **状态同步**：开关状态与配置文件同步，重启扩展后保持用户设置

3. **状态提示**：切换工具状态时会显示临时状态消息，3秒后自动消失

4. **配置更新**：更改开关状态会自动更新全局配置

## 技术实现

1. **配置层**：在 `AiConfig` 接口中添加 `enableTools` 字段

2. **服务层**：在 `AiService` 中根据 `enableTools` 配置决定是否在API请求中包含工具相关字段

3. **界面层**：在聊天界面的HTML中添加开关控件和相关样式

4. **通信层**：通过消息传递机制在界面和扩展之间同步状态

## 使用方法

1. 打开AI聊天界面
2. 在工具栏中找到"启用工具"开关
3. 点击开关切换工具调用状态：
   - 开启：AI可以使用文件操作等工具
   - 关闭：AI仅进行对话，不使用任何工具

## 兼容性

- 默认启用工具调用功能
- 与现有配置完全兼容
- 不影响其他功能的正常使用